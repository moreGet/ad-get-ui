/* src/assets/global.css (lean) */

/* ===== Variables ===== */
:root {
    /* 네브바 높이: 사용처에서 안전하게 fallback도 둠 */
    --app-navbar-height: 56px;
    /* 레일 폭(반응형 기본값) */
    --rail-w: 150px;
    /* 중앙 컨텐츠 최대폭 */
    --content-max-w: 1200px;
    /* 리스트 카드 */
    --thumb-size-sm: 56px;
    --thumb-size-md: 72px;
    --thumb-size-lg: 96px;
}

/* ===== Rails (sides) ===== */
.ad-rail-left,
.ad-rail-right {
    width: var(--rail-w);
    display: flex;
    justify-content: center;
}

.rail-sticky {
    position: sticky;
    top: calc(var(--app-navbar-height, 56px) + 8px); /* fallback 보강 */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 992px 미만에서 레일 숨김 (부트스트랩 lg 기준) */
@media (max-width: 991.98px) {
    .ad-rail-left,
    .ad-rail-right {
        display: none !important;
    }
}

/* 더 큰 화면에서 레일 폭 조정(선택) */
@media (min-width: 1200px) {
    :root {
        --rail-w: 180px;
    }
}

/* ===== Brand (logo) ===== */
/* transform 대신 max-height로 비용 절감 + 바 높이 영향 최소화 */
.brand-wrap {
    height: 60px; /* 바 높이 영향 X */
    display: inline-flex;
    align-items: center;
    overflow: visible; /* 커져도 잘리지 않게 */
}

.brand-wrap img {
    height: 60px; /* 기준 높이 */
    transform: scale(1.1); /* ⬅️ 여기 값만 바꾸면 됨 (1.1~1.4 권장) */
    transform-origin: left center; /* 왼쪽 기준으로 커지게 */
    display: block;
}

/* ===== Navbar toggler type ===== */
.navbar .navbar-toggler {
    font-size: 1rem;
}

@media (max-width: 360px) {
    .navbar .navbar-toggler {
        font-size: 1.0625rem;
    }
}

@media (min-width: 576px) and (max-width: 991.98px) {
    .navbar .navbar-toggler {
        font-size: .9375rem;
    }
}

/* ===== Content area ===== */
.app-content {
    min-width: 0;
    display: flex;
}

.app-content-inner {
    width: 100%;
    max-width: var(--content-max-w);
    margin-inline: auto;
    padding-inline: 12px;
}

@media (min-width: 1400px) {
    :root {
        --content-max-w: 1320px;
    }
}

/* 좁은 flex 컨테이너 가로 스크롤 허용(선택) */
.container-fluid > .d-flex.flex-nowrap {
    overflow-x: auto;
}

/* 소형 라벨 자간 */
.label-xs {
    letter-spacing: .03em;
}

/* ===== Card hover effect ===== */
.card-hover {
    position: relative;
    overflow: hidden;
    border-radius: 1rem;
    background: var(--bs-body-bg);
    border: 1px solid rgba(var(--bs-emphasis-color-rgb), .08);
    transition: transform .35s cubic-bezier(.2, .8, .2, 1),
    box-shadow .35s cubic-bezier(.2, .8, .2, 1),
    border-color .35s,
    background .35s;
    will-change: transform;
}

.card-hover::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity .35s;
    background: radial-gradient(60% 60% at 30% 10%, rgba(var(--bs-primary-rgb), .28), transparent 60%),
    radial-gradient(60% 60% at 80% 80%, rgba(99, 102, 241, .25), transparent 60%);
    mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    padding: 1px;
}

.card-hover img,
.card-hover .card-img,
.card-hover .card-img-top {
    transition: transform .6s cubic-bezier(.2, .8, .2, 1);
    will-change: transform;
}

.card-hover:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 40px -16px rgba(0, 0, 0, .35);
    border-color: rgba(var(--bs-primary-rgb), .45);
}

.card-hover:hover::before {
    opacity: 1;
}

.card-hover:hover img,
.card-hover:hover .card-img,
.card-hover:hover .card-img-top {
    transform: scale(1.035);
}

.card-hover:focus-visible {
    outline: 3px solid rgba(var(--bs-primary-rgb), .6);
    outline-offset: 2px;
}

.card-hover:active {
    transform: translateY(-2px) scale(.995);
}

/* ===== Navbar underline ===== */
.navlink-underline {
    --ul-inset-x: .5rem; /* 좌우 여백 */
    --ul-offset-y: .35rem; /* 아래로부터 거리 */
    --ul-thickness: 2px; /* 선 두께 */
    position: relative;
    transition: color .25s ease;
}

.navlink-underline::after {
    content: "";
    position: absolute;
    left: var(--ul-inset-x);
    right: var(--ul-inset-x);
    bottom: var(--ul-offset-y);
    height: var(--ul-thickness);
    background: var(--bs-primary);
    transform: scaleX(0);
    transform-origin: center;
    transition: transform .25s cubic-bezier(.2, .8, .2, 1);
    pointer-events: none;
}

.navlink-underline:hover,
.navlink-underline:focus {
    color: var(--bs-primary);
}

.navlink-underline:hover::after,
.navlink-underline:focus::after {
    transform: scaleX(1);
}

/* 활성(현재 라우트) */
.nav-link.active.navlink-underline,
button.active.navlink-underline {
    color: var(--bs-primary);
}

.nav-link.active.navlink-underline::after,
button.active.navlink-underline::after {
    transform: scaleX(1);
}

/* 드롭다운 내부 활성 항목이 있으면 토글 버튼도 활성화처럼 보이기 */
.nav-item.dropdown:has(.dropdown-menu .active) > .navlink-underline {
    color: var(--bs-primary);
}

.nav-item.dropdown:has(.dropdown-menu .active) > .navlink-underline::after {
    transform: scaleX(1);
}

/* ===== Dropdown animation (no transform) ===== */
.dropdown-menu.dropdown-animate {
    display: block; /* 초기 레이아웃 확보 */
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    margin-top: -12px;
    transition: opacity .28s cubic-bezier(.16, 1, .3, 1),
    margin-top .28s cubic-bezier(.16, 1, .3, 1);
    will-change: opacity, margin-top;
}

.dropdown-menu.dropdown-animate.show {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    margin-top: 0;
}

/* 방향별 보정 */
.dropup .dropdown-menu.dropdown-animate {
    margin-top: 0;
    margin-bottom: -12px;
}

.dropup .dropdown-menu.dropdown-animate.show {
    margin-bottom: 0;
}

.dropend .dropdown-menu.dropdown-animate {
    margin-left: -12px;
}

.dropend .dropdown-menu.dropdown-animate.show {
    margin-left: 0;
}

.dropstart .dropdown-menu.dropdown-animate {
    margin-right: -12px;
}

.dropstart .dropdown-menu.dropdown-animate.show {
    margin-right: 0;
}

/* ===== Reduced motion (통합) ===== */
@media (prefers-reduced-motion: reduce) {
    .card-hover, .card-hover * {
        transition: none !important;
    }

    .dropdown-menu.dropdown-animate {
        transition: none !important;
        opacity: 1 !important;
        margin: 0 !important;
    }

    .navlink-underline, .navlink-underline::after {
        transition: none !important;
    }
}

/* ===== Thumbnail (simplified) ===== */
.thumb {
    position: relative;
    width: 72px;
    height: 72px;
    overflow: hidden;
    background: var(--bs-light, #f8f9fa);
    border-radius: .375rem;
    flex-shrink: 0;
}

.thumb__img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: opacity .15s linear;
}

/* 초기: 정지 이미지 표시, 애니메이션은 숨김 */
.thumb__img--still {
    opacity: 1;
}

.thumb__img--anim {
    opacity: 0;
}

/* hover 시 애니메이션 표시 */
.card:hover .thumb__img--anim,
.card:focus-within .thumb__img--anim {
    opacity: 1;
}

.card:hover .thumb__img--still,
.card:focus-within .thumb__img--still {
    opacity: 0;
}

footer {
    background: var(--bs-body-bg);
}

footer .nav-link {
    color: var(--bs-secondary-color);
    font-size: 1.0rem;
}

footer .nav-link:hover {
    color: var(--bs-primary);
    text-decoration: underline;
}

.footer-text-sm {
    font-size: 1.0rem; /* 14px */
    color: var(--bs-secondary-color, #6c757d);
}

/* Terms 전용 히어로(타이틀) */
.terms-hero {
    padding-block: .5rem 1rem;
    border-bottom: 1px solid rgba(0, 0, 0, .06);
}

/* 로고(타이틀) 이미지: 반응형 높이 고정, 비율 유지 */
.brand-title {
    display: block;
    height: clamp(100px, 0vw, 100px); /* 화면 크기에 따라 32~48px */
    width: auto; /* 비율 유지 */
    margin-inline: auto; /* 가로 중앙 */
}

/* 본문 폭 제한(이미 가지고 있으면 유지) */
.content-narrow {
    max-width: 720px;
}

/* 섹션 간격 보강(이미 있으면 스킵 가능) */
.section {
    margin-bottom: 2rem;
}

.section-title {
    margin-bottom: .5rem;
}

/* 좁은 본문 폭 컨테이너 */
.content-narrow {
    max-width: 720px;
}

/* 한국식 불릿 리스트 */
.k-bullets {
    padding-left: 0;
    margin: 0;
}

.k-bullets li {
    list-style: none;
    position: relative;
    padding-left: 1.25rem;
    margin-bottom: .375rem;
    color: var(--bs-secondary-color, #6c757d);
    font-size: .875rem; /* small */
}

.k-bullets--dash li::before {
    content: "–"; /* 긴 대시 */
    position: absolute;
    left: 0;
}

.k-bullets--circle li::before {
    content: "ㅇ"; /* 동그라미 표기 */
    position: absolute;
    left: 0;
}

/* 제목들 간격 */
.section-title {
    margin-bottom: .5rem;
}

.section {
    margin-bottom: 2rem;
}

/* ===== Reveal (subtle, trendy) ===== */
.reveal-base {
    opacity: 0;
    transform: translateY(8px);
    will-change: opacity, transform;
    transition: opacity .48s cubic-bezier(.22, .61, .36, 1),
    transform .48s cubic-bezier(.22, .61, .36, 1);
}

.reveal-hero { /* 로고/히어로 */
    opacity: 0;
    transform: translateY(6px) scale(0.995);
    transition: opacity .5s cubic-bezier(.22, .61, .36, 1),
    transform .6s cubic-bezier(.22, .61, .36, 1);
}

.is-visible {
    opacity: 1;
    transform: none;
}

/* 리스트 항목 순차 등장(스태거) */
.reveal-stagger > * {
    opacity: 0;
    transform: translateY(8px);
    transition: opacity .44s cubic-bezier(.22, .61, .36, 1),
    transform .44s cubic-bezier(.22, .61, .36, 1);
}

.reveal-stagger.is-visible > * {
    opacity: 1;
    transform: none;
}

/* 간단한 딜레이: nth-child로 6개까지 커버 (필요 시 확장) */
.reveal-stagger.is-visible > *:nth-child(1) {
    transition-delay: .02s;
}

.reveal-stagger.is-visible > *:nth-child(2) {
    transition-delay: .06s;
}

.reveal-stagger.is-visible > *:nth-child(3) {
    transition-delay: .10s;
}

.reveal-stagger.is-visible > *:nth-child(4) {
    transition-delay: .14s;
}

.reveal-stagger.is-visible > *:nth-child(5) {
    transition-delay: .18s;
}

.reveal-stagger.is-visible > *:nth-child(6) {
    transition-delay: .22s;
}

/* 모션 줄이기: 전환 제거하고 즉시 표시 */
@media (prefers-reduced-motion: reduce) {
    .reveal-base,
    .reveal-hero,
    .reveal-stagger > * {
        transition: none !important;
        opacity: 1 !important;
        transform: none !important;
    }
}

/* ===== Sequential Reveal (한 줄 순차 등장) ===== */
[data-reveal] {
    --reveal-delay: 0s; /* 기본값 선언 */
    opacity: 0;
    transform: translateY(8px);
    transition: opacity .48s cubic-bezier(.22, .61, .36, 1),
    transform .48s cubic-bezier(.22, .61, .36, 1);
    transition-delay: var(--reveal-delay);
}

/* 히어로(로고)는 살짝만 */
[data-reveal="hero"] {
    transform: translateY(6px) scale(.995);
    transition: opacity .5s cubic-bezier(.22, .61, .36, 1),
    transform .6s cubic-bezier(.22, .61, .36, 1);
}

/* 컨테이너에 플래그가 붙으면 모두 재생 */
.is-revealing [data-reveal] {
    opacity: 1;
    transform: none;
}

/* 모션 줄이기: 즉시 표시 */
@media (prefers-reduced-motion: reduce) {
    [data-reveal] {
        transition: none !important;
        opacity: 1 !important;
        transform: none !important;
    }
}

/* ===== Modal Overlay & Card ===== */
.modal-overlay-blur {
    background: rgba(18, 18, 18, .42);
    backdrop-filter: blur(4px);
    z-index: 1050;
}

.modal-card {
    width: min(560px, 92vw);
}

.modal-card-lg {
    width: min(640px, 92vw);
}

/* ===== Badges / Chips ===== */
.badge-click {
    padding: 6px 10px;
    color: #2b2f36;
}

.badge-soft {
    background: #f7f7f8 !important;
    border: 1px solid #e5e6e8 !important;
    color: #2b2f36 !important;
}

.mono-chip {
    display: inline-block;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    font-size: .9rem;
    background: #f7f7f8;
    border: 1px solid #e5e6e8;
    border-radius: 8px;
    padding: 6px 10px;
    color: #2c3e50;
    text-decoration: none;
}

/* ===== Brand / Link Tone ===== */
.brand-link {
    color: #2c3e50;
    text-decoration: none;
    font-weight: 600;
}

/* ===== Icon Box (Large) ===== */
.icon-box-lg {
    width: 56px;
    height: 56px;
    background: #f4f5f7;
    border: 1px solid #e7e8ea;
    border-radius: .5rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ===== Title Divider ===== */
.title-divider {
    margin-top: 1rem;
    margin-bottom: 0;
    opacity: .25;
}