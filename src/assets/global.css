/* src/assets/global.css (lean) */

/* ===== Variables ===== */
:root {
    /* 네브바 높이: 사용처에서 안전하게 fallback도 둠 */
    --app-navbar-height: 56px;
    /* 레일 폭(반응형 기본값) */
    --rail-w: 150px;
    /* 중앙 컨텐츠 최대폭 */
    --content-max-w: 1200px;
}

/* ===== Rails (sides) ===== */
.ad-rail-left,
.ad-rail-right {
    width: var(--rail-w);
    display: flex;
    justify-content: center;
}

.rail-sticky {
    position: sticky;
    top: calc(var(--app-navbar-height, 56px) + 8px); /* fallback 보강 */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 992px 미만에서 레일 숨김 (부트스트랩 lg 기준) */
@media (max-width: 991.98px) {
    .ad-rail-left,
    .ad-rail-right {
        display: none !important;
    }
}

/* 더 큰 화면에서 레일 폭 조정(선택) */
@media (min-width: 1200px) {
    :root {
        --rail-w: 180px;
    }
}

/* ===== Brand (logo) ===== */
/* transform 대신 max-height로 비용 절감 + 바 높이 영향 최소화 */
.brand-wrap {
    height: 60px; /* 바 높이 영향 X */
    display: inline-flex;
    align-items: center;
    overflow: visible; /* 커져도 잘리지 않게 */
}

.brand-wrap img {
    height: 60px; /* 기준 높이 */
    transform: scale(1.1); /* ⬅️ 여기 값만 바꾸면 됨 (1.1~1.4 권장) */
    transform-origin: left center; /* 왼쪽 기준으로 커지게 */
    display: block;
}

/* ===== Navbar toggler type ===== */
.navbar .navbar-toggler {
    font-size: 1rem;
}

@media (max-width: 360px) {
    .navbar .navbar-toggler {
        font-size: 1.0625rem;
    }
}

@media (min-width: 576px) and (max-width: 991.98px) {
    .navbar .navbar-toggler {
        font-size: .9375rem;
    }
}

/* ===== Content area ===== */
.app-content {
    min-width: 0;
    display: flex;
}

.app-content-inner {
    width: 100%;
    max-width: var(--content-max-w);
    margin-inline: auto;
    padding-inline: 12px;
}

@media (min-width: 1400px) {
    :root {
        --content-max-w: 1320px;
    }
}

/* 좁은 flex 컨테이너 가로 스크롤 허용(선택) */
.container-fluid > .d-flex.flex-nowrap {
    overflow-x: auto;
}

/* 소형 라벨 자간 */
.label-xs {
    letter-spacing: .03em;
}

/* ===== Card hover effect ===== */
.card-hover {
    position: relative;
    overflow: hidden;
    border-radius: 1rem;
    background: var(--bs-body-bg);
    border: 1px solid rgba(var(--bs-emphasis-color-rgb), .08);
    transition: transform .35s cubic-bezier(.2, .8, .2, 1),
    box-shadow .35s cubic-bezier(.2, .8, .2, 1),
    border-color .35s,
    background .35s;
    will-change: transform;
}

.card-hover::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transition: opacity .35s;
    background: radial-gradient(60% 60% at 30% 10%, rgba(var(--bs-primary-rgb), .28), transparent 60%),
    radial-gradient(60% 60% at 80% 80%, rgba(99, 102, 241, .25), transparent 60%);
    mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    padding: 1px;
}

.card-hover img,
.card-hover .card-img,
.card-hover .card-img-top {
    transition: transform .6s cubic-bezier(.2, .8, .2, 1);
    will-change: transform;
}

.card-hover:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 40px -16px rgba(0, 0, 0, .35);
    border-color: rgba(var(--bs-primary-rgb), .45);
}

.card-hover:hover::before {
    opacity: 1;
}

.card-hover:hover img,
.card-hover:hover .card-img,
.card-hover:hover .card-img-top {
    transform: scale(1.035);
}

.card-hover:focus-visible {
    outline: 3px solid rgba(var(--bs-primary-rgb), .6);
    outline-offset: 2px;
}

.card-hover:active {
    transform: translateY(-2px) scale(.995);
}

/* ===== Navbar underline ===== */
.navlink-underline {
    --ul-inset-x: .5rem; /* 좌우 여백 */
    --ul-offset-y: .35rem; /* 아래로부터 거리 */
    --ul-thickness: 2px; /* 선 두께 */
    position: relative;
    transition: color .25s ease;
}

.navlink-underline::after {
    content: "";
    position: absolute;
    left: var(--ul-inset-x);
    right: var(--ul-inset-x);
    bottom: var(--ul-offset-y);
    height: var(--ul-thickness);
    background: var(--bs-primary);
    transform: scaleX(0);
    transform-origin: center;
    transition: transform .25s cubic-bezier(.2, .8, .2, 1);
    pointer-events: none;
}

.navlink-underline:hover,
.navlink-underline:focus {
    color: var(--bs-primary);
}

.navlink-underline:hover::after,
.navlink-underline:focus::after {
    transform: scaleX(1);
}

/* 활성(현재 라우트) */
.nav-link.active.navlink-underline,
button.active.navlink-underline {
    color: var(--bs-primary);
}

.nav-link.active.navlink-underline::after,
button.active.navlink-underline::after {
    transform: scaleX(1);
}

/* 드롭다운 내부 활성 항목이 있으면 토글 버튼도 활성화처럼 보이기 */
.nav-item.dropdown:has(.dropdown-menu .active) > .navlink-underline {
    color: var(--bs-primary);
}

.nav-item.dropdown:has(.dropdown-menu .active) > .navlink-underline::after {
    transform: scaleX(1);
}

/* ===== Dropdown animation (no transform) ===== */
.dropdown-menu.dropdown-animate {
    display: block; /* 초기 레이아웃 확보 */
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    margin-top: -12px;
    transition: opacity .28s cubic-bezier(.16, 1, .3, 1),
    margin-top .28s cubic-bezier(.16, 1, .3, 1);
    will-change: opacity, margin-top;
}

.dropdown-menu.dropdown-animate.show {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    margin-top: 0;
}

/* 방향별 보정 */
.dropup .dropdown-menu.dropdown-animate {
    margin-top: 0;
    margin-bottom: -12px;
}

.dropup .dropdown-menu.dropdown-animate.show {
    margin-bottom: 0;
}

.dropend .dropdown-menu.dropdown-animate {
    margin-left: -12px;
}

.dropend .dropdown-menu.dropdown-animate.show {
    margin-left: 0;
}

.dropstart .dropdown-menu.dropdown-animate {
    margin-right: -12px;
}

.dropstart .dropdown-menu.dropdown-animate.show {
    margin-right: 0;
}

/* ===== Reduced motion (통합) ===== */
@media (prefers-reduced-motion: reduce) {
    .card-hover, .card-hover * {
        transition: none !important;
    }

    .dropdown-menu.dropdown-animate {
        transition: none !important;
        opacity: 1 !important;
        margin: 0 !important;
    }

    .navlink-underline, .navlink-underline::after {
        transition: none !important;
    }
}
